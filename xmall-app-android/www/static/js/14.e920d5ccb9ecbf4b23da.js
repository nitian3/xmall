webpackJsonp([14],{YRzT:function(t,e){},pIoA:function(t,e){},y6U2:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=s("Xxa5"),r=s.n(c),a=s("exGp"),i=s.n(a),n=s("mvHQ"),o=s.n(n),u=s("Dd8w"),d=s.n(u),l=s("cPqU"),p=s("PuJJ"),v=s("Au9i"),f=s("vsZy"),m=s("NYxO"),h=s("KusN"),_={data:function(){return{cartList:null,totalFee:0,selectedCounter:0,selectedAll:!1,isLogin:!1}},watch:{},components:{FooterView:l.a,SearchBar:p.a,LoadMore:h.a},computed:d()({},Object(m.b)(["cartProductData","userInfo"])),methods:{selectedAllGoods:function(){var t=this;this.cartList.map(function(e){1===e.status&&(e.checked=!t.selectedAll)}),this.selectedAll=!this.selectedAll,this.computedTotalFee()},confirmOrder:function(){var t=this,e=[];if(this.cartList.map(function(t){1===t.status&&t.checked&&e.push(t.product.productNo)}),""==e)return Object(v.Toast)({message:"请选择商品",position:"bottom"});this.$store.dispatch("ConfirmSelectProduct",{SelectedList:o()(e)}).then(function(e){t.$router.push("/createOrder")})},computedTotalFee:function(){var t=0,e=0;this.cartList.map(function(s){s.checked&&1===s.status&&(t+=parseFloat(s.counter*s.product.price),e++)}),this.selectedCounter=e,this.selectedAll=e===this.cartList.length,this.totalFee=t.toFixed(2)},editProductNum:function(t){var e=this,s=t.item,c=t.increment,a=t.counter;return i()(r.a.mark(function t(){var i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={SelectedList:o()([{ProductNo:s.product.productNo}])},a?i.Counter=a:i.Increment=c,t.next=4,e.$store.dispatch("SelectProduct",i);case 4:e.onRefreshCallback();case 5:case"end":return t.stop()}},t,e)}))()},checked:function(t){var e=this;return i()(r.a.mark(function s(){var c;return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t.checked=!t.checked,c=0,e.cartList.map(function(t){if(1===t.status&&t.checked)return c++}),c!==e.cartList.length){s.next=5;break}return s.abrupt("return",e.selectedAllGoods());case 5:e.computedTotalFee();case 6:case"end":return s.stop()}},s,e)}))()},initData:function(){var t=this;return i()(r.a.mark(function e(){var s,c,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=Object(f.b)("MemberToken"),t.isLogin=!!s,s){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t.$store.dispatch("GetSelectedProductList");case 6:c=e.sent,a=c.Data,t.cartList=a||null;case 9:case"end":return e.stop()}},e,t)}))()},onRefreshCallback:function(){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.$store.dispatch("GetSelectedProductList").then(function(e){setTimeout(function(){t.cartList=e.Data,t.computedTotalFee(),t.selectedAll=!1,t.$refs.cartLoadmore.onTopLoaded(t.$refs.cartLoadmore.uuid)},500)},function(e){return t.$refs.cartLoadmore.translate=0,t.$refs.cartLoadmore.topStatus="pull",t.$refs.cartLoadmore.AllLoaded=!1,t.$refs.cartLoadmore.LoadMoreLoading=!1});case 1:case"end":return e.stop()}},e,t)}))()}},mounted:function(){this.initData()}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("search-bar",{attrs:{Status:!0}},[s("div",{staticClass:"scanCode",staticStyle:{"min-width":"2rem"},attrs:{slot:"left-icon"},slot:"left-icon"}),t._v(" "),s("div",{staticClass:"cart-title",attrs:{slot:"title-icon"},slot:"title-icon"},[t._v("购物车")]),t._v(" "),s("div",{staticClass:"edit",attrs:{slot:"right-icon"},slot:"right-icon"},[s("span",{staticClass:"edit-title"},[t._v("编辑")]),t._v(" "),s("i",{staticClass:"searchIcon searchMsgIcon"})])]),t._v(" "),s("div",{staticClass:"Section"},[t.isLogin?t._e():s("div",{staticClass:"login-info"},[s("button",{staticClass:"login",on:{click:function(e){return t.$router.push("/login")}}},[t._v("登录")]),t._v(" "),s("span",[t._v("登录后同步电脑与手机购物车中的商品")])]),t._v(" "),s("load-more",{ref:"cartLoadmore",style:{width:"100%",height:"85%",paddingTop:t.isLogin?"1.2rem":"0"},attrs:{topMethod:t.onRefreshCallback,loadMoreIconVisible:!1}},[s("div",{staticClass:"goods"},[t._e(),t._v(" "),t.cartList?s("div",{staticClass:"store-pd"},t._l(t.cartList,function(e,c){return s("div",{key:c,staticClass:"store-pd-item"},[s("i",{class:["select-default-icon",e.checked?"select-icon":""],on:{click:function(s){return t.checked(e)}}}),t._v(" "),s("div",{staticClass:"pd-images"},[s("img",{attrs:{src:e.product.image_url[0].url,alt:""}})]),t._v(" "),s("div",{staticClass:"pd-info"},[s("div",{staticClass:"pd-title"},[s("p",[t._v(t._s(e.product.productName))])]),t._v(" "),s("div",{staticClass:"pd-sku"},[s("p",{staticClass:"sku-info"},[t._v(t._s(e.product.summary))])]),t._v(" "),s("div",{staticClass:"pd-price"},[s("div",{staticClass:"left"},[s("span",[t._v("¥")]),t._v(" "),s("strong",[t._v(t._s(e.product.price))])]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"cut",on:{click:function(s){return t.editProductNum({item:e,increment:-1})}}}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.counter,expression:"item.counter"}],staticClass:"num-inp",attrs:{type:"text"},domProps:{value:e.counter},on:{change:function(s){return t.editProductNum({item:e,counter:e.counter})},input:function(s){s.target.composing||t.$set(e,"counter",s.target.value)}}}),t._v(" "),s("div",{staticClass:"add",on:{click:function(s){return t.editProductNum({item:e,increment:1})}}})])])])])}),0):t._e()]),t._v(" "),t.cartList&&""!=t.cartList?t._e():s("p",{staticStyle:{"margin-top":"50px",padding:"15px 0","text-align":"center","font-size":"16px",color:"#999"}},[t._v("购物车是空的")])])],1),t._v(" "),s("div",{staticClass:"section-bar"},[s("div",{staticClass:"left"},[s("i",{class:["select-default-icon",t.selectedAll?"select-icon":""],on:{click:t.selectedAllGoods}}),t._v("全选\n      "),s("strong",[t._v("合计：¥"+t._s(t.totalFee))])]),t._v(" "),s("div",{staticClass:"right",on:{click:t.confirmOrder}},[s("strong",[t._v("去结算\n        "),s("span",[t._v("("+t._s(t.selectedCounter)+")")])])])]),t._v(" "),s("FooterView")],1)},staticRenderFns:[]};var L=s("VU/8")(_,C,!1,function(t){s("pIoA"),s("YRzT")},"data-v-703ddda1",null);e.default=L.exports}});